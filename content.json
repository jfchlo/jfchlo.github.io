{"meta":{"title":"映 像","subtitle":null,"description":null,"author":"JF","url":"https://jfchl.cn"},"pages":[],"posts":[{"title":"JupyterToMarkdownTest","slug":"JupyterToMarkdownTest","date":"2018-09-09T22:20:51.000Z","updated":"2018-09-09T22:54:18.342Z","comments":true,"path":"2018/09/10/JupyterToMarkdownTest/","link":"","permalink":"https://jfchl.cn/2018/09/10/JupyterToMarkdownTest/","excerpt":"","text":"这是以前用jupyter，今日转换成md放到这里作为一个测试 销售描述统计与 matplotlib pandas 数据重采样 pandas 数据透视表 matplotlib 中文及符号显示 基本画图 以一月份份的销售为例： 123456import osimport pandas as pdimport matplotlib.pyplot as pltname=['单号','销售日期','商品编码','商品名称','车型','仓位','销售数量','销售单价','销售金额']os.chdir('e:')df1=pd.read_excel('./zyxiaoshou.xlsx',sheetname='Sheet5',header=0,names=name) 1df1.head() 单号销售日期商品编码商品名称车型仓位销售数量销售单价销售金额0SEL16053100012016-05-310501120615-003车门铰链NJPAA112.012.01SEL16053100012016-05-310501120708-001锁体NJPAA116.016.02SEL16053100022016-05-310303100406-001后制动底板FTAB190.090.03SEL16053100032016-05-310601013409-001排气制动阀CDW王牌库187.087.04SEL16053100032016-05-310601060304-014后轮毂CDW王牌库1218.8218.8 这是一月份总体销售情况，来做个初步的统计描述,总销售金额，各个仓位的销售金额(包含了销售退单）看看pandas的透视表函授怎么实现上述功能 pd.pivot_table 12sel_table=df1.pivot_table(index='仓位',values=['销售金额'],aggfunc=sum,margins_name='销售总计',margins=True)sel_table 销售金额仓位AA119338.44AB59614.94AF-2224.00王牌库124863.98福田库168834.13轮胎库35870.00销售总计506297.49 12sel_table=df1.pivot_table(index='商品名称',values=['销售数量','销售金额'],aggfunc=sum)sel_table.sort_values(by='销售金额',ascending=False)[0:10] 销售数量销售金额商品名称发动机总成551328.70驾驶室空壳544360.00轮胎20335646.00保险杠8715155.11齿轮油27314013.00驾驶室总成113000.00后视镜77712639.10前大灯10512065.88散热器总成2611505.91柴油机油14310672.90 销售数据在一个工作薄中8个不同滴表中，看否能合并为一个 12345678910import osimport pandas as pdimport matplotlib.pyplot as pltname=['单号','销售日期','商品编码','商品名称','车型','仓位','销售数量','销售单价','销售金额']os.chdir('e:')df=[]for i in range(1,13): df.append(pd.read_excel('./zyxiaoshou.xlsx',sheetname='Sheet'+str(i),header=0,names=name))data=pd.concat(df)data.index=[data['销售日期']] 1data.tail() 单号销售日期商品编码商品名称车型仓位销售数量销售单价销售日期&lt;th2016-12-01SEL16120100262016-12-0103021613-112散热器总成FT福田库1575.09575.092016-12-01SEL16120100272016-12-010302121201-022挡泥板FT福田库290.00180.002016-12-01SEL16120100272016-12-010302121201-023挡泥板FT福田库190.0090.002016-12-01SEL16120100272016-12-010302121205-046轮罩FT福田库152.0052.002016-12-01SEL16120100272016-12-010302121205-047轮罩FTAB152.0052.00 1len(data) 33932 1from datetime import datetime 12sel_table=data.pivot_table(index='销售日期',columns='仓位',values='销售金额',aggfunc=sum,fill_value=0)sel_table.head() 仓位AAABACAFBARRZ整车王牌库王牌旧件库福田库福田旧件库轮胎库销售日期2016-01-022665.52157.000-25.000001340.0008472.890.00.02016-01-034155.02835.720-259.500007509.7003874.550.00.02016-01-0426055.02803.560-80.000003851.4805751.850.00.02016-01-0511263.06323.1100.000001978.5003278.500.00.02016-01-061223.01529.0000.000001081.8003100.430.00.0 12#每月各个仓库的销售汇总sel_table.resample('m').sum() 仓位AAABACAFBARRZ整车王牌库王牌旧件库福田库福田旧件库轮胎库销售日期2016-01-31127682.8092014.750-2761.3000-2000124957.82-65125930.350.000.002016-02-2962677.0036036.510-741.50000051051.230116428.230.000.002016-03-31258884.70127815.220-4070.7274000209483.660301219.340.000.002016-04-30136980.0254074.050-1972.500000182166.400187852.540.0027648.002016-05-31119338.4459614.940-2224.000000124863.980168834.130.0035870.002016-06-3094775.6295951.110-2370.5404154000091800125914.730189296.920.0022858.002016-07-3190293.4266642.80-70-2625.00011246600090984.310110750.86-914.0334125.002016-08-3180870.8843727.090-1636.000171048025580063678.54092951.81-345.0041848.002016-09-30114232.5848921.980-3032.0000026430094730.090105888.18-16.0036781.902016-10-3196081.6058120.440-3359.5000018000064260.25088486.43-285.0825395.162016-11-3099597.1034259.780-2770.5000026819750649.67099196.5552674.372016-12-3199297.4553077.180-534.50009800049910.290113013.720.0022431.87 123456789101112t1=sel_table.resample('m').sum().ix[:,['福田库','王牌库','AA','AB','整车','轮胎库']]plt.rcParams['font.sans-serif']=['SimHei']plt.rcParams['axes.unicode_minus']=Falset1.plot(figsize=(10,3),rot=30)plt.legend()plt.grid(True)plt.xlabel('月份')plt.ylabel('销售金额')plt.title('2016年1-8月份分库销售统计')plt.show() 1234567t2=t1.resample('m').sum().sum(axis=1)t2.plot(figsize=(10,3),rot=30)plt.grid(True)plt.ylabel('销售金额(万元)')plt.xlabel('月份')plt.show() 123456789101112t1.sum(axis=1).plot(figsize=(10,3),rot=45,style='bo-')plt.grid(True)plt.title('总体销售')plt.ylabel('销售金额')plt.xlabel('销售月份')for i in range(len(t1)): plt.annotate(t1.sum(axis=1).values[i], xy=(t1.index[i],t1.sum(axis=1)[i]), xytext=(t1.index[i],t1.sum(axis=1)[i]) ) plt.show() 123import numpy as npa=pd.Series([1,2,3])a[1] 2 12t1.plot(subplots=True,figsize=(6,10),sharey=True,grid=True)plt.show() 12t1.plot(subplots=True,figsize=(14,6),layout=(2,3),sharey=True,sharex=False,grid=True)plt.show() 12t1.sum(axis=0).plot.pie(figsize=(6,6),autopct='%.2f')plt.show() 12t1.plot.area(figsize=(12,6))plt.show() 12345678910import osimport pandas as pdimport matplotlib.pyplot as pltname=['单号','销售日期','商品编码','商品名称','车型','仓位','销售数量','销售单价','销售金额']os.chdir('e:')df=[]for i in range(1,12): df.append(pd.read_excel('./zyxiaoshou.xlsx',sheetname='Sheet'+str(i),header=0,names=name))data=pd.concat(df)data.to_excel('./zyqp.xls')","categories":[{"name":"数据分析","slug":"数据分析","permalink":"https://jfchl.cn/categories/数据分析/"}],"tags":[{"name":"jupyter markdown","slug":"jupyter-markdown","permalink":"https://jfchl.cn/tags/jupyter-markdown/"}]},{"title":"青海湖","slug":"qinghaihu","date":"2018-09-08T14:04:51.000Z","updated":"2018-09-08T14:22:36.745Z","comments":true,"path":"2018/09/08/qinghaihu/","link":"","permalink":"https://jfchl.cn/2018/09/08/qinghaihu/","excerpt":"","text":"","categories":[{"name":"PHOTOS","slug":"PHOTOS","permalink":"https://jfchl.cn/categories/PHOTOS/"}],"tags":[{"name":"photos","slug":"photos","permalink":"https://jfchl.cn/tags/photos/"}]},{"title":"justifiedGallery-test","slug":"facybox-test","date":"2018-09-05T07:04:51.000Z","updated":"2018-09-05T12:40:24.958Z","comments":true,"path":"2018/09/05/facybox-test/","link":"","permalink":"https://jfchl.cn/2018/09/05/facybox-test/","excerpt":"","text":"本想出发之前完成。。。。。。","categories":[{"name":"PHOTOS","slug":"PHOTOS","permalink":"https://jfchl.cn/categories/PHOTOS/"}],"tags":[{"name":"photos","slug":"photos","permalink":"https://jfchl.cn/tags/photos/"}]},{"title":"Hello World","slug":"hello-world","date":"2018-07-25T14:17:16.784Z","updated":"2018-07-30T05:52:19.237Z","comments":true,"path":"2018/07/25/hello-world/","link":"","permalink":"https://jfchl.cn/2018/07/25/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}